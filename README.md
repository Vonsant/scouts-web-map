# Карта галактик — диаграмма Вороного

Интерактивная веб-карта для визуализации и поиска по данным галактик, систем и планет. Построена на основе диаграммы Вороного с использованием библиотеки D3.js.

## Технологии
-   HTML5
-   CSS3 (Grid, Flexbox)
-   JavaScript (ES Modules)
-   **D3.js (v7)**
-   **d3-delaunay.js (v6)**

## Использование

### Карта
-   **Навигация:** Масштабируйте и перемещайте карту с помощью мыши или кнопок `+` / `-` / `100%` в правом верхнем углу.
-   **Всплывающая подсказка:** При наведении курсора на систему на карте, в правом верхнем углу появится подсказка с детальной информацией о системе, включая списки планет и станций.
-   **Выбор системы:** Клик по ячейке/точке на карте выберет эту систему и отобразит её полную карточку в панели справа.

### Панель поиска (слева)
Поиск работает по принципу "аккордеона". Чтобы фильтр применился, его блок должен быть раскрыт.

-   **Галактика:** Фильтрует системы только в пределах выбранной галактики.
-   **Система:** Поиск по названию системы и наличию астероидного пояса.
-   **ПЛАНЕТЫ:** Поиск по обитаемым планетам.
    -   *Название:* Поиск по имени планеты.
    -   *Раса:* Выбор одной или нескольких рас чекбоксами. Найдёт системы, где есть планеты с **любой** из выбранных рас.
    -   *Уровень:* Поиск по диапазону уровней планет.
-   **Расы:** Отдельный блок для контекстного поиска по расе. Работает в связке с другими активными блоками:
    -   **С блоком "Станции":** Находит системы, где есть станции, соответствующие фильтрам станций И принадлежащие выбранной расе.
    -   **С блоком "ПЛАНЕТЫ":** Находит системы, где есть обитаемые планеты, соответствующие фильтрам планет И населенные выбранной расой.
    -   **С блоком "Необитаемые планеты":** Находит системы, где есть подходящие необитаемые планеты И где выбранная раса является доминирующей (или одной из доминирующих) по количеству планет в системе.
-   **Станции:** Поиск по типу, названию и уровню станций.
-   **Необитаемые планеты:** Поиск по типу рельефа, наличию всех указанных ресурсов на одной планете и соотношению типов поверхности.

### Панель результатов (справа)
-   При клике на кнопку "Найти" в этой панели отобразится список всех найденных систем.
-   Все найденные системы будут одновременно подсвечены на карте.
-   Клик по системе в списке результатов отобразит её детальную карточку и снимет общую подсветку, выделив только выбранную систему.

---

## Локальная разработка

Приложение использует JavaScript-модули. Из-за политики безопасности современных браузеров, скрипты не будут работать, если открывать `index.html` напрямую с диска (через `file:///`).

Для локального тестирования и разработки необходимо запустить простой веб-сервер в корневой папке проекта.

Если у вас установлен Python 3, вы можете использовать встроенный сервер. Откройте терминал (командную строку) в папке с проектом и выполните команду:

```bash
python -m http.server
```

После этого сайт будет доступен в браузере по адресу `http://localhost:8000`.

---

## Импорт новых данных
Если вы обновляете CSV, его нужно снова преобразовать в `data.json`. Это можно сделать с помощью предоставленного скрипта `csv_to_json.py` или своим кодом, следуя той же схеме агрегации.
